{
  "author": {
    "name": "Evan Tahler",
    "email": "evantahler@gmail.com"
  },
  "name": "actionhero_client",
  "description": "actionHero client in JS for other node servers to use",
  "version": "1.0.1",
  "homepage": "https://github.com/evantahler/actionhero_client",
  "repository": {
    "type": "git",
    "url": "git://github.com/evantahler/actionhero_client.git"
  },
  "main": "actionHeroClient",
  "keywords": [
    "socket",
    "tcp",
    "actionHero"
  ],
  "engines": {
    "node": ">=0.6.x"
  },
  "dependencies": {},
  "devDependencies": {
    "actionHero": "git://github.com/evantahler/actionHero.git#master",
    "vows": "x.x.x"
  },
  "scripts": {
    "test": "./node_modules/.bin/vows test.js --dot-matrix"
  },
  "readme": "#actionhero_client (for nodeJS)\n\n[![build status](https://secure.travis-ci.org/evantahler/actionhero_client.png)](http://travis-ci.org/evantahler/actionhero_client)\n\nThis library makes it easy for one nodeJS process to talk to a remote [actionHero](http://actionherojs.com/) server.\n\nThis library makes use of actionHero's TCP socket connections to enable fast, stateful connections.  This library also allows for many concurrent and asynchronous requests to be running in parallel by making use of actionHero's message counter.  This library is at times event-driven, and for functions that makes sense to do so, callback based.\n\n## Setup\n\nInstallation should be as simple as:\n\n\tnpm install actionhero_client\n\nand then you can include it in your projects with:\n\n\tvar actionhero_client = require(\"actionhero_client\").actionhero_client;\n\nOnce you have included the actionHeroClient library within your project, you can connect like this:\n\n\tactionhero_client.connect({\n\t\thost: \"127.0.0.1\",\n\t\tport: \"5000\",\n\t}, callback);\n\ndefault options (which you can ovveride) are:\n\n  var defaults = {\n    host: \"127.0.0.1\",\n    port: \"5000\",\n    delimiter: \"\\r\\n\",\n    logLength: 100,\n    secure: false,\n    timeout: 30000,\n  };\n\n## Events\n\nactionhero_client will emit a few types of events (many of which are caught in the example below).  Here are the events, and how you might catch them:\n\n* `actionhero_client.on(\"connected\", function(null){})`\n* `actionhero_client.on(\"end\", function(null){})`\n* `actionhero_client.on(\"welcome\", function(welcomeMessage){})`\n  * welcomeMessage is a string\n* `actionhero_client.on(\"error\", function(errorMessage){})`\n  * errorMessage is a string\n* `actionhero_client.on(\"say\", function(messageBlock){})`\n  * messageBlock is a hash containing `timeStamp`, `from`, and `message`\n* `actionhero_client.on(\"timeout\", function(err, request, caller){})`\n  * request is the string sent to the api\n  * caller (the calling function) is returned if your api requset didn't complete within `params.callback`\n## Methods\n\nOne you are connected (by waiting for the \"connected\" event), the following methods will be available to you:\n\n* `actionhero_client.disconnect(next)`\n* `actionhero_client.paramAdd(key,value,next)`\n  * remember that both key and value must pass JSON.stringify\n* `actionhero_client.paramDelete(key,next)`\n* `actionhero_client.paramsDelete(next)`\n* `actionhero_client.paramView(key,next)`\n* `actionhero_client.paramsView(next)`\n* `actionhero_client.roomView(next)`\n* `actionhero_client.details(next)`\n* `actionhero_client.roomChange(room,next)`\n* `actionhero_client.say(msg,next)`\n* `actionhero_client.action(action,next)`\n  * this basic action method will not set or unset any params  \n  * next will be passed (err, data, duration)\n* `actionhero_client.actionWithParams(action,params,next)`\n  * this action will ignore any previously set params to the connection\n  * params is a hash of this form `{key: \"myKey\", value: \"myValue\"}` \n  * next will be passed (err, data, duration)\n\nEach callback will receive the full data hash returned from the server and a timestamp: `(err, data, duration)`\n\n\n## Data \n\nThere are a few data elements you can inspect on `actionhero_client`:\n\n* `actionhero_client.lastLine`\n  * This is the last parsed JSON message received from the server (chronologically, not by messageID)\n* `actionhero_client.userMessages`\n  * a hash which contains the latest `say` message from all users\n* `actionhero_client.log`\n  * An array of the last n parsable JSON replies from the server\n  * each entry is of the form {data, timeStamp} where data was the server's full response\n* `actionhero_client.messageCount` \n  * An integer counting the number of messages received from the server\n\n## Example\n\n  var action_hero_client = require(\"./actionhero_client.js\");\n  var A = new action_hero_client;\n\n  A.on(\"say\",function(msgBlock){\n    console.log(\" > SAY: \" + msgBlock.message + \" | from: \" + msgBlock.from);\n  });\n\n  A.on(\"welcome\", function(msg){\n    console.log(\"WELCOME: \" + msg);\n  });\n\n  A.on(\"error\", function(err){\n    console.log(\"ERROR: \" + err);\n  });\n\n  A.on(\"end\", function(){\n    console.log(\"Connection Closed\");\n  });\n\n  A.on(\"timeout\", function(err, request, caller){\n    console.log(request + \" timed out\");\n  });\n\n  A.connect({\n    host: \"127.0.0.1\",\n    port: \"5000\",\n  });\n\n  A.on(\"connected\", function(){\n    console.log(\"\\r\\nCONNECTED\\r\\n\");\n    A.action(\"status\", function(err, apiResposne, delta){\n      console.log(\"STATUS:\");\n      console.log(\" > uptimeSeconds: \" + apiResposne.stats.uptimeSeconds);\n      console.log(\" > numberOfLocalSocketRequests: \" + apiResposne.stats.socketServer.numberOfLocalSocketRequests);\n      console.log(\" ~ request duration: \" + delta + \"ms\");\n\n      // Action should have an error, not all the params are provided\n      A.action(\"cacheTest\", function(err, apiResposne, delta){\n        console.log(\"cacheTest (try 1) Error: \" + apiResposne.error);\n        console.log(\" ~ request duration: \" + delta + \"ms\");\n\n        // Action should be OK now\n        params = { key: \"mykey\", value: \"myValue\" };\n        A.actionWithParams(\"cacheTest\", params, function(err, apiResposne, delta){\n          console.log(\"cacheTest (try 2) Error: \" + apiResposne.error);\n          console.log(\"cacheTest (try 2) response: \" + apiResposne.cacheTestResults.saveResp);\n          console.log(\" ~ request duration: \" + delta + \"ms\");\n\n          console.log(\"\\r\\nWorking!\");\n\n          //cool, lets leave\n          A.disconnect();\n          setTimeout(process.exit, 1000); // leave some time for the \"end\" even to fire\n        });\n      });\n    });\n  });\n",
  "readmeFilename": "readme.md",
  "_id": "actionhero_client@1.0.1",
  "_from": "actionhero_client@"
}
